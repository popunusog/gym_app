import{a as G}from"./chunk-MXKH4JHY.js";import{a as K,b as Q,c as X,d as Z,e as tt,f as et,g as nt,h as it,i as ot,j as rt,k as at}from"./chunk-UDRWS6IV.js";import{a as q}from"./chunk-P5IGRWT5.js";import{g as z,h as U,i as j,j as L}from"./chunk-6SHB3MR2.js";import"./chunk-PZVGKDTC.js";import{Y as R,Z as V,_ as N,ca as H,da as Y,fa as J}from"./chunk-FVZDA3P3.js";import{b as $,f as F,i as W,r as B}from"./chunk-7H4TAELE.js";import"./chunk-HU7WFQWJ.js";import{a as I}from"./chunk-PADSZVWK.js";import{Ca as d,Ga as c,Kb as E,N as S,Pa as i,Q as D,Qa as o,Ra as C,Rb as P,Sa as p,Ta as f,U as g,V as h,Va as x,Ya as b,Zb as T,_a as _,ib as a,kb as u,lb as y,ma as l,mb as w,na as v,nb as k,ob as O,wa as A}from"./chunk-U3NN5SHJ.js";var M=class t{constructor(e){this.http=e}adminApiUrl=`${I.apiUrl}/admin`;getAllClients(){return this.http.get(`${this.adminApiUrl}/clients`)}getAllWorkers(){return this.http.get(`${this.adminApiUrl}/workers`)}logout(){localStorage.clear(),console.log("User logged out successfully")}disableClient(e){return this.http.put(`${this.adminApiUrl}/clients/${e}/disable`,{},{responseType:"text"})}enableClient(e){return this.http.put(`${this.adminApiUrl}/clients/${e}/enable`,{},{responseType:"text"})}disableWorker(e){return this.http.put(`${this.adminApiUrl}/workers/${e}/disable`,{},{responseType:"text"})}enableWorker(e){return this.http.put(`${this.adminApiUrl}/workers/${e}/enable`,{},{responseType:"text"})}static \u0275fac=function(n){return new(n||t)(D(P))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};function st(t,e){t&1&&(i(0,"th",24),a(1," Client "),o())}function ct(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.clientName," ")}}function pt(t,e){t&1&&(i(0,"th",24),a(1," Trainer "),o())}function ft(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.trainerName," ")}}function ut(t,e){t&1&&(i(0,"th",24),a(1," Text "),o())}function _t(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.text," ")}}function bt(t,e){t&1&&(i(0,"th",24),a(1," Rating "),o())}function Ct(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.rating," ")}}function gt(t,e){t&1&&(i(0,"th",24),a(1," Actions "),o())}function ht(t,e){if(t&1){let n=x();i(0,"td",25)(1,"button",26),b("click",function(){let s=g(n).$implicit,m=_();return h(m.deleteOpinion(s.id))}),a(2," Delete "),o()()}}function xt(t,e){t&1&&C(0,"tr",27)}function vt(t,e){t&1&&C(0,"tr",28)}function Mt(t,e){t&1&&(i(0,"th",24),a(1," Code "),o())}function wt(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.clientCode," ")}}function kt(t,e){t&1&&(i(0,"th",24),a(1," Name "),o())}function Ot(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.name," ")}}function St(t,e){t&1&&(i(0,"th",24),a(1," Email "),o())}function Dt(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.email," ")}}function At(t,e){t&1&&(i(0,"th",24),a(1," Actions "),o())}function yt(t,e){if(t&1){let n=x();i(0,"button",26),b("click",function(){g(n);let s=_().$implicit,m=_();return h(m.toggleClientStatus(s.clientCode,!1))}),a(1," Disable "),o()}}function Et(t,e){if(t&1){let n=x();i(0,"button",31),b("click",function(){g(n);let s=_().$implicit,m=_();return h(m.toggleClientStatus(s.clientCode,!0))}),a(1," Enable "),o()}}function Pt(t,e){if(t&1&&(i(0,"td",25),d(1,yt,2,0,"button",29)(2,Et,2,0,"button",30),o()),t&2){let n=e.$implicit;l(),c("ngIf",n.enabled),l(),c("ngIf",!n.enabled)}}function Tt(t,e){t&1&&C(0,"tr",27)}function It(t,e){t&1&&C(0,"tr",28)}function $t(t,e){t&1&&(i(0,"th",24),a(1," ID "),o())}function Ft(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.id," ")}}function Wt(t,e){t&1&&(i(0,"th",24),a(1," Name "),o())}function Bt(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.name," ")}}function Rt(t,e){t&1&&(i(0,"th",24),a(1," Email "),o())}function Vt(t,e){if(t&1&&(i(0,"td",25),a(1),o()),t&2){let n=e.$implicit;l(),u(" ",n.email," ")}}function Nt(t,e){t&1&&(i(0,"th",24),a(1," Actions "),o())}function Ht(t,e){if(t&1){let n=x();i(0,"button",26),b("click",function(){g(n);let s=_().$implicit,m=_();return h(m.toggleWorkerStatus(s.id,!1))}),a(1," Disable "),o()}}function zt(t,e){if(t&1){let n=x();i(0,"button",31),b("click",function(){g(n);let s=_().$implicit,m=_();return h(m.toggleWorkerStatus(s.id,!0))}),a(1," Enable "),o()}}function Ut(t,e){if(t&1&&(i(0,"td",25),d(1,Ht,2,0,"button",29)(2,zt,2,0,"button",30),o()),t&2){let n=e.$implicit;l(),c("ngIf",n.enabled),l(),c("ngIf",!n.enabled)}}function jt(t,e){t&1&&C(0,"tr",27)}function Lt(t,e){t&1&&C(0,"tr",28)}var lt=class t{constructor(e,n,r,s){this.router=e;this.adminService=n;this.opinionService=r;this.snackBar=s}adminName="Admin";adminSurname="User";opinions=[];filteredOpinions=[];trainerFilter="";textFilter="";displayedOpinionColumns=["client","trainer","text","rating","actions"];clients=[];displayedClientColumns=["clientCode","name","email","actions"];workers=[];displayedWorkerColumns=["id","name","email","actions"];ngOnInit(){this.loadAdminInfo(),this.loadOpinions(),this.loadClients(),this.loadWorkers()}logout(){this.adminService.logout(),this.router.navigate(["/login"])}loadAdminInfo(){let e=JSON.parse(localStorage.getItem("userInfo")||"{}");this.adminName=e.name||"Admin",this.adminSurname=e.surname||"User"}loadOpinions(){this.opinionService.getAllOpinions().subscribe({next:e=>{this.opinions=e,this.filteredOpinions=[...e]},error:e=>{console.error("Error loading opinions:",e),this.snackBar.open("Failed to load opinions.","Close",{duration:3e3})}})}loadClients(){this.adminService.getAllClients().subscribe({next:e=>{this.clients=e},error:e=>{console.error("Error loading clients:",e),this.snackBar.open("Failed to load clients.","Close",{duration:3e3})}})}loadWorkers(){this.adminService.getAllWorkers().subscribe({next:e=>{this.workers=e},error:e=>{console.error("Error loading workers:",e),this.snackBar.open("Failed to load workers.","Close",{duration:3e3})}})}applyOpinionFilters(){this.filteredOpinions=this.opinions.filter(e=>{let n=e.trainerName.toLowerCase().includes(this.trainerFilter.toLowerCase()),r=e.text.toLowerCase().includes(this.textFilter.toLowerCase());return n&&r})}toggleClientStatus(e,n){let r=n?"enable":"disable";confirm(`Are you sure you want to ${r} this client?`)&&(n?this.adminService.enableClient(e):this.adminService.disableClient(e)).subscribe({next:()=>{this.loadClients(),this.snackBar.open(`Client ${r}d successfully.`,"Close",{duration:3e3})},error:m=>{console.error(`Error ${r}ing client:`,m),this.snackBar.open(`Failed to ${r} client.`,"Close",{duration:3e3})}})}toggleWorkerStatus(e,n){let r=n?"enable":"disable";confirm(`Are you sure you want to ${r} this worker?`)&&(n?this.adminService.enableWorker(e):this.adminService.disableWorker(e)).subscribe({next:()=>{this.loadWorkers(),this.snackBar.open(`Worker ${r}d successfully.`,"Close",{duration:3e3})},error:m=>{console.error(`Error ${r}ing worker:`,m),this.snackBar.open(`Failed to ${r} worker.`,"Close",{duration:3e3})}})}deleteOpinion(e){confirm("Are you sure you want to delete this opinion?")&&this.opinionService.deleteOpinion(e).subscribe({next:n=>{this.opinions=this.opinions.filter(r=>r.id!==e),this.filteredOpinions=[...this.opinions],this.snackBar.open(n.message,"Close",{duration:3e3})},error:n=>{console.error("Error deleting opinion:",n),this.snackBar.open("Failed to delete opinion.","Close",{duration:3e3})}})}static \u0275fac=function(n){return new(n||t)(v(T),v(M),v(G),v(q))};static \u0275cmp=A({type:t,selectors:[["app-admin-dashboard"]],decls:75,vars:13,consts:[[1,"admin-dashboard"],[1,"header"],[1,"header-left"],[1,"header-right"],["mat-button","","color","primary",1,"role-badge"],["mat-raised-button","","color","warn",1,"logout-btn",3,"click"],[1,"section-card"],[1,"filter-section"],["matInput","","placeholder","Filter by trainer",3,"ngModelChange","input","ngModel"],["matInput","","placeholder","Filter by text",3,"ngModelChange","input","ngModel"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","client"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","trainer"],["matColumnDef","text"],["matColumnDef","rating"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","clientCode"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","id"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"]],template:function(n,r){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4),o()(),i(5,"div",3)(6,"button",4),a(7,"Administrator"),o(),i(8,"button",5),b("click",function(){return r.logout()}),a(9,"Log Out"),o()()(),i(10,"mat-card",6)(11,"mat-card-title"),a(12,"Opinions"),o(),i(13,"mat-card-content")(14,"div",7)(15,"mat-form-field")(16,"input",8),O("ngModelChange",function(m){return k(r.trainerFilter,m)||(r.trainerFilter=m),m}),b("input",function(){return r.applyOpinionFilters()}),o()(),i(17,"mat-form-field")(18,"input",9),O("ngModelChange",function(m){return k(r.textFilter,m)||(r.textFilter=m),m}),b("input",function(){return r.applyOpinionFilters()}),o()()(),i(19,"table",10),p(20,11),d(21,st,2,0,"th",12)(22,ct,2,1,"td",13),f(),p(23,14),d(24,pt,2,0,"th",12)(25,ft,2,1,"td",13),f(),p(26,15),d(27,ut,2,0,"th",12)(28,_t,2,1,"td",13),f(),p(29,16),d(30,bt,2,0,"th",12)(31,Ct,2,1,"td",13),f(),p(32,17),d(33,gt,2,0,"th",12)(34,ht,3,0,"td",13),f(),d(35,xt,1,0,"tr",18)(36,vt,1,0,"tr",19),o()()(),i(37,"mat-card",6)(38,"mat-card-title"),a(39,"Clients"),o(),i(40,"mat-card-content")(41,"table",10),p(42,20),d(43,Mt,2,0,"th",12)(44,wt,2,1,"td",13),f(),p(45,21),d(46,kt,2,0,"th",12)(47,Ot,2,1,"td",13),f(),p(48,22),d(49,St,2,0,"th",12)(50,Dt,2,1,"td",13),f(),p(51,17),d(52,At,2,0,"th",12)(53,Pt,3,2,"td",13),f(),d(54,Tt,1,0,"tr",18)(55,It,1,0,"tr",19),o()()(),i(56,"mat-card",6)(57,"mat-card-title"),a(58,"Workers"),o(),i(59,"mat-card-content")(60,"table",10),p(61,23),d(62,$t,2,0,"th",12)(63,Ft,2,1,"td",13),f(),p(64,21),d(65,Wt,2,0,"th",12)(66,Bt,2,1,"td",13),f(),p(67,22),d(68,Rt,2,0,"th",12)(69,Vt,2,1,"td",13),f(),p(70,17),d(71,Nt,2,0,"th",12)(72,Ut,3,2,"td",13),f(),d(73,jt,1,0,"tr",18)(74,Lt,1,0,"tr",19),o()()()()),n&2&&(l(4),y("Welcome, ",r.adminName," ",r.adminSurname,"!"),l(12),w("ngModel",r.trainerFilter),l(2),w("ngModel",r.textFilter),l(),c("dataSource",r.filteredOpinions),l(16),c("matHeaderRowDef",r.displayedOpinionColumns),l(),c("matRowDefColumns",r.displayedOpinionColumns),l(5),c("dataSource",r.clients),l(13),c("matHeaderRowDef",r.displayedClientColumns),l(),c("matRowDefColumns",r.displayedClientColumns),l(5),c("dataSource",r.workers),l(13),c("matHeaderRowDef",r.displayedWorkerColumns),l(),c("matRowDefColumns",r.displayedWorkerColumns))},dependencies:[E,B,$,F,W,at,K,X,nt,Z,Q,it,tt,et,ot,rt,U,z,L,j,J,Y,H,R,N,V],styles:[".admin-dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;padding:2rem;min-height:100vh;background:linear-gradient(135deg,#232526,#414345);color:#fff;font-family:Poppins,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:1.5rem 2rem;border-radius:12px;box-shadow:0 8px 32px #0003}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:600;color:#fff}.header-right[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e84393,#fd79a8);color:#fff;padding:.6rem 1.5rem;border-radius:50px;font-size:.9rem;font-weight:600;text-transform:uppercase;border:none;box-shadow:0 4px 15px #e843934d;transition:all .3s ease}.header-right[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #e8439366}.section-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#2b3555,#1f2644);border-radius:12px;box-shadow:0 8px 32px #0003;overflow:hidden}.section-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600;color:#7ed6df;padding:1.5rem 2rem;margin:0;background:#0003}.section-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:2rem}.filter-section[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-bottom:2rem}.filter-section[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.mat-elevation-z8[_ngcontent-%COMP%]{background:transparent;border-radius:8px;overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.mat-header-cell[_ngcontent-%COMP%]{background:#0003;color:#7ed6df;font-size:.95rem;font-weight:600;padding:1.2rem 1.5rem;text-transform:uppercase;letter-spacing:.5px}.mat-cell[_ngcontent-%COMP%]{color:#fff;font-size:.95rem;padding:1.2rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.mat-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.mat-row[_ngcontent-%COMP%]:hover{background:#ffffff0d}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-outline{color:#fff3}[_nghost-%COMP%]     .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline{color:#7ed6df}[_nghost-%COMP%]     .mat-form-field-label{color:#ffffffb3}[_nghost-%COMP%]     .mat-form-field.mat-focused .mat-form-field-label{color:#7ed6df}[_nghost-%COMP%]     .mat-input-element{color:#fff}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-outline-thick{color:#7ed6df}button[mat-button][_ngcontent-%COMP%]{min-width:100px;padding:.5rem 1.2rem;font-size:.9rem;font-weight:500;border-radius:6px;transition:all .3s ease}button[mat-button][color=warn][_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff7675,#d63031);color:#fff}button[mat-button][color=primary][_ngcontent-%COMP%]{background:linear-gradient(135deg,#74b9ff,#0984e3);color:#fff}button[mat-button][_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0000004d}.mat-column-actions[_ngcontent-%COMP%]{text-align:right;padding-right:2rem}.mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 .3rem}.mat-column-rating[_ngcontent-%COMP%]{font-weight:600}.status-badge[_ngcontent-%COMP%]{padding:.3rem .8rem;border-radius:50px;font-size:.8rem;font-weight:600}.status-enabled[_ngcontent-%COMP%]{background-color:#00b894;color:#fff}.status-disabled[_ngcontent-%COMP%]{background-color:#d63031;color:#fff}@media screen and (max-width: 768px){.admin-dashboard[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem;padding:1.2rem}.filter-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.section-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.4rem;padding:1.2rem}.section-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.2rem}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{padding:1rem;font-size:.9rem}.mat-card-content[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{min-width:600px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}.logout-btn[_ngcontent-%COMP%]{background:#e74c3c;color:#fff;font-weight:700;border-radius:8px;padding:.5rem 1rem;box-shadow:0 4px 6px #0003;transition:background .3s}.logout-btn[_ngcontent-%COMP%]:hover{background:#c0392b}"]})};export{lt as AdminDashboardComponent};
