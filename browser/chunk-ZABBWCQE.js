import{a as Z,b as $}from"./chunk-TA4ICQ4K.js";import{b as D,c as j,d as V,g as z,h as U,i as H,j as W}from"./chunk-6SHB3MR2.js";import{a as J,b as K}from"./chunk-KIAPMKTF.js";import{$ as B,Y as N,Z as R,_ as A,ba as G,ca as q,da as Q,ea as X,fa as Y}from"./chunk-FVZDA3P3.js";import{b as S,d as g,f as O,g as k,j as I,l as E,m as L,q as F,s as T}from"./chunk-7H4TAELE.js";import"./chunk-HU7WFQWJ.js";import{a as y}from"./chunk-WB3XM774.js";import"./chunk-PADSZVWK.js";import{Ca as s,Fa as h,Ga as l,Kb as x,Ob as P,Pa as o,Qa as i,Ra as p,Ya as u,Zb as w,_a as M,ib as a,jb as C,kb as v,ma as r,na as c,wa as _}from"./chunk-U3NN5SHJ.js";function et(n,t){n&1&&(o(0,"mat-error"),a(1,"Email is required"),i())}function ot(n,t){n&1&&(o(0,"mat-error"),a(1,"Please enter a valid email"),i())}function it(n,t){n&1&&(o(0,"mat-error"),a(1,"Password is required"),i())}function nt(n,t){if(n&1&&(o(0,"div",14),a(1),i()),n&2){let m=M();r(),v(" ",m.errorMessage," ")}}function rt(n,t){n&1&&p(0,"mat-spinner",15)}function at(n,t){n&1&&(o(0,"span"),a(1,"Login"),i())}var tt=class n{constructor(t,m,e){this.fb=t;this.authService=m;this.router=e;this.loginForm=this.fb.group({email:["",[g.required,g.email]],password:["",g.required]})}loginForm;errorMessage="";isLoading=!1;hidePassword=!0;ngOnInit(){}onSubmit(){this.loginForm.valid&&(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:t=>{switch(this.isLoading=!1,this.authService.storeToken(t.token),this.authService.storeUserInfo(t.name,t.surname,t.role,t.clientCode),t.role){case"CLIENT":this.router.navigate(["/client-dashboard"]);break;case"TRAINER":this.router.navigate(["/trainer-dashboard"]);break;case"ADMIN":this.router.navigate(["/admin-dashboard"]);break;case"MANAGER":this.router.navigate(["/manager-dashboard"]);break;default:this.errorMessage="Unknown role. Please contact support."}},error:t=>{this.isLoading=!1,t.status===403?this.errorMessage=t.error||"Invalid email or password.":t.status===404?this.errorMessage="User not found.":this.errorMessage="An unexpected error occurred. Please try again later.",console.error("Error:",t)}}))}navigateToRegister(){this.router.navigate(["/register"])}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static \u0275fac=function(m){return new(m||n)(c(F),c(y),c(w))};static \u0275cmp=_({type:n,selectors:[["app-login"]],decls:32,vars:12,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","email","type","email","placeholder","Enter your email"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["class","error-message",4,"ngIf"],[1,"button-group"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],["diameter","20",4,"ngIf"],["mat-stroked-button","","color","accent","type","button",1,"register-button",3,"click"],[1,"error-message"],["diameter","20"]],template:function(m,e){if(m&1&&(o(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),a(4,"Welcome Back"),i(),o(5,"mat-card-subtitle"),a(6,"Login to your account"),i()(),o(7,"mat-card-content")(8,"form",2),u("ngSubmit",function(){return e.onSubmit()}),o(9,"mat-form-field",3)(10,"mat-label"),a(11,"Email"),i(),p(12,"input",4),o(13,"mat-icon",5),a(14,"email"),i(),s(15,et,2,0,"mat-error",6)(16,ot,2,0,"mat-error",6),i(),o(17,"mat-form-field",3)(18,"mat-label"),a(19,"Password"),i(),p(20,"input",7),o(21,"button",8),u("click",function(){return e.togglePasswordVisibility()}),o(22,"mat-icon"),a(23),i()(),s(24,it,2,0,"mat-error",6),i(),s(25,nt,2,1,"div",9),o(26,"div",10)(27,"button",11),s(28,rt,1,0,"mat-spinner",12)(29,at,2,0,"span",6),i(),o(30,"button",13),u("click",function(){return e.navigateToRegister()}),a(31," Register "),i()()()()()()),m&2){let d,f,b;r(8),l("formGroup",e.loginForm),r(7),l("ngIf",(d=e.loginForm.get("email"))==null?null:d.hasError("required")),r(),l("ngIf",(f=e.loginForm.get("email"))==null?null:f.hasError("email")),r(4),l("type",e.hidePassword?"password":"text"),r(),h("aria-label","Hide password")("aria-pressed",e.hidePassword),r(2),C(e.hidePassword?"visibility_off":"visibility"),r(),l("ngIf",(b=e.loginForm.get("password"))==null?null:b.hasError("required")),r(),l("ngIf",e.errorMessage),r(2),l("disabled",e.loginForm.invalid||e.isLoading),r(),l("ngIf",e.isLoading),r(),l("ngIf",!e.isLoading)}},dependencies:[P,x,T,I,S,O,k,E,L,q,N,A,G,B,R,U,z,D,j,V,W,H,K,J,Y,Q,X,$,Z],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#6a11cb,#2575fc);padding:20px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background-color:#2d2e52;border-radius:12px;box-shadow:0 4px 8px #0003;color:#fff}mat-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}mat-card-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#e6e9f0}mat-card-subtitle[_ngcontent-%COMP%]{color:#b0b3c9}mat-card-content[_ngcontent-%COMP%]{padding:0 20px 20px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}[_nghost-%COMP%]     .mat-mdc-form-field-focus-overlay{background-color:#2d2e52}[_nghost-%COMP%]     .mdc-text-field--filled{background-color:#2d2e52!important}[_nghost-%COMP%]     .mdc-text-field--outlined{background-color:#2d2e52}[_nghost-%COMP%]     .mat-mdc-form-field-flex{background-color:#2d2e52!important}[_nghost-%COMP%]     .mat-mdc-input-element{color:#fff!important}[_nghost-%COMP%]     .mat-mdc-floating-label{color:#b0b3c9!important}[_nghost-%COMP%]     .mdc-notched-outline__leading, [_nghost-%COMP%]     .mdc-notched-outline__notch, [_nghost-%COMP%]     .mdc-notched-outline__trailing{border-color:#5a5c9d!important}[_nghost-%COMP%]     .mat-mdc-form-field mat-icon{color:#b0b3c9}input[_ngcontent-%COMP%]:-webkit-autofill, input[_ngcontent-%COMP%]:-webkit-autofill:hover, input[_ngcontent-%COMP%]:-webkit-autofill:focus, input[_ngcontent-%COMP%]:-webkit-autofill:active{-webkit-box-shadow:0 0 0 30px #2d2e52 inset!important;-webkit-text-fill-color:#ffffff!important;caret-color:#fff!important}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.9rem;margin-top:15px;text-align:center;background-color:#ff6b6b1a;padding:10px;border:1px solid #ff6b6b;border-radius:5px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:25px;gap:10px}button[_ngcontent-%COMP%]{min-width:120px;padding:10px;font-size:1rem;border-radius:8px}button[color=primary][_ngcontent-%COMP%]{background-color:#5a5c9d;color:#fff}button[color=primary][_ngcontent-%COMP%]:hover{background-color:#45466b}button[color=accent][_ngcontent-%COMP%]{background-color:transparent;color:#ff8c42;border:1px solid #ff8c42}button[color=accent][_ngcontent-%COMP%]:hover{background-color:#ff8c421a}mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}@media (max-width: 480px){.button-group[_ngcontent-%COMP%]{flex-direction:column}button[_ngcontent-%COMP%]{width:100%}}"]})};export{tt as LoginComponent};
